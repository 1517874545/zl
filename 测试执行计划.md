# 校园管理小程序 - 测试执行计划

## 📋 项目概览

**项目名称**: 校园管理小程序  
**技术栈**: 微信小程序 + TypeScript + Less + Supabase  
**开发状态**: ✅ 开发完成，准备测试  
**测试日期**: _______________

---

## 🔧 测试前准备

### 1. 环境检查清单

- [ ] **微信开发者工具已安装并打开**
  - 版本要求：最新稳定版
  - 项目路径：`D:\aer\wenjian`
  - AppID：`wxeb4628014080a5e5`（或使用测试号）

- [ ] **Supabase数据库已配置**
  - 项目URL：`https://mvzpegvtiafzzznzvdqx.supabase.co`
  - 已执行 `database/schema_complete.sql` 创建所有表
  - 已配置RLS策略（允许匿名访问，开发阶段）

- [ ] **微信小程序后台配置**
  - 已配置request合法域名：`https://mvzpegvtiafzzznzvdqx.supabase.co`
  - 或：在开发者工具中勾选「不校验合法域名」（仅开发环境）

- [ ] **API配置检查**
  - 天气API：已配置（和风天气）
  - AI API：已配置（豆包/火山引擎）
  - 配置文件：`miniprogram/utils/config.ts`

### 2. 编译检查

- [ ] 打开微信开发者工具，点击「编译」
- [ ] 检查控制台是否有编译错误
- [ ] 检查是否有TypeScript类型错误
- [ ] 确认所有页面路径正确

---

## 🧪 功能测试清单

### 模块1：首页功能 ✅

**测试步骤：**
1. [ ] 启动小程序，查看首页是否正常显示
2. [ ] 检查问候语是否根据时间段变化（上午/下午/晚上）
3. [ ] 检查日期显示格式是否正确（如：23 2025年04月 星期三）
4. [ ] 检查用户头像是否显示
5. [ ] 检查纪念日倒计时卡片是否显示（如果有数据）
6. [ ] 点击各个功能按钮，测试跳转：
   - [ ] 纪念日
   - [ ] 课程表
   - [ ] 存钱罐
   - [ ] 记事本
   - [ ] 天气
   - [ ] 番茄钟
   - [ ] AI助手（如果有入口）

**预期结果：**
- ✅ 页面正常加载，无报错
- ✅ 问候语、日期显示正确
- ✅ 功能按钮跳转正常
- ✅ 纪念日数据从数据库加载（如果数据库为空，显示默认状态）

**问题记录：**
```
[在此记录发现的问题]
```

---

### 模块2：动态功能 ✅

**测试步骤：**
1. [ ] 进入「动态」页面
2. [ ] 查看动态列表是否从数据库加载
3. [ ] 点击「发布」按钮
4. [ ] 填写动态内容
5. [ ] 选择图片（可选，测试1-9张图片）
6. [ ] 填写位置（可选）
7. [ ] 选择心情（可选）
8. [ ] 添加话题标签（可选）
9. [ ] 点击「发布」按钮
10. [ ] 返回动态列表，查看新发布的动态是否显示
11. [ ] 测试点赞功能
12. [ ] 测试评论功能
13. [ ] 测试下拉刷新

**预期结果：**
- ✅ 动态列表正常显示
- ✅ 发布动态成功，显示在列表顶部
- ✅ 点赞功能正常，数据保存到数据库
- ✅ 评论功能正常，评论保存到数据库
- ✅ 下拉刷新能重新加载最新数据

**数据库验证：**
- [ ] 在Supabase控制台查看 `moments` 表，确认数据已保存
- [ ] 查看 `moment_comments` 表，确认评论已保存

**问题记录：**
```
[在此记录发现的问题]
```

---

### 模块3：笔记功能 ✅

**测试步骤：**
1. [ ] 进入「记事本」页面
2. [ ] 查看笔记列表是否从数据库加载
3. [ ] 点击「+」按钮创建新笔记
4. [ ] 输入笔记内容
5. [ ] 添加图片（可选）
6. [ ] 选择分类（如果有）
7. [ ] 添加标签（如果有）
8. [ ] 保存笔记
9. [ ] 返回列表，查看笔记是否保存
10. [ ] 点击笔记卡片，编辑笔记内容
11. [ ] 长按笔记卡片，测试置顶功能
12. [ ] 长按笔记卡片，测试删除功能
13. [ ] 测试搜索功能
14. [ ] 测试按分类筛选

**预期结果：**
- ✅ 笔记列表正常显示
- ✅ 创建笔记成功，保存到数据库
- ✅ 编辑笔记成功，更新数据库
- ✅ 置顶功能正常
- ✅ 删除功能正常
- ✅ 搜索功能正常
- ✅ 分类筛选正常

**数据库验证：**
- [ ] 在Supabase控制台查看 `notes` 表，确认数据已保存
- [ ] 查看 `note_categories` 表，确认分类已保存

**问题记录：**
```
[在此记录发现的问题]
```

---

### 模块4：纪念日功能 ✅

**测试步骤：**
1. [ ] 进入「纪念日」页面
2. [ ] 查看纪念日列表是否从数据库加载
3. [ ] 点击「+」按钮添加新纪念日
4. [ ] 填写事件名称
5. [ ] 选择起始日期
6. [ ] 选择目标日期
7. [ ] 设置是否置顶
8. [ ] 设置重复类型（无/年/月/日）
9. [ ] 保存后返回列表，查看是否显示
10. [ ] 点击纪念日卡片，编辑纪念日
11. [ ] 测试删除功能
12. [ ] 返回首页，查看纪念日倒计时是否更新

**预期结果：**
- ✅ 纪念日列表正常显示
- ✅ 添加纪念日成功，保存到数据库
- ✅ 编辑纪念日成功，更新数据库
- ✅ 删除功能正常
- ✅ 首页倒计时正确显示

**数据库验证：**
- [ ] 在Supabase控制台查看 `anniversaries` 表，确认数据已保存

**问题记录：**
```
[在此记录发现的问题]
```

---

### 模块5：存钱罐功能 ✅

**测试步骤：**
1. [ ] 进入「存钱罐」页面
2. [ ] 查看当前余额（初始为0）
3. [ ] 点击「收入」按钮，添加收入记录
4. [ ] 输入金额、分类、备注
5. [ ] 确认保存
6. [ ] 查看余额是否更新
7. [ ] 点击「支出」按钮，添加支出记录
8. [ ] 输入金额、分类、备注
9. [ ] 确认保存
10. [ ] 查看余额是否正确计算
11. [ ] 点击「查看记录」，查看交易历史
12. [ ] 测试删除记录功能
13. [ ] 测试统计信息显示
14. [ ] 测试预算设置功能
15. [ ] 测试预算列表查看

**预期结果：**
- ✅ 余额显示正确
- ✅ 收入记录保存成功
- ✅ 支出记录保存成功
- ✅ 余额计算正确（收入 - 支出）
- ✅ 交易记录正确显示
- ✅ 统计信息正确
- ✅ 预算功能正常

**数据库验证：**
- [ ] 在Supabase控制台查看 `financial_records` 表，确认数据已保存
- [ ] 查看 `budgets` 表，确认预算已保存
- [ ] 验证余额计算是否正确

**问题记录：**
```
[在此记录发现的问题]
```

---

### 模块6：课程表功能 ✅

**测试步骤：**
1. [ ] 进入「课程表」页面
2. [ ] 查看课程表是否从数据库加载
3. [ ] 点击「+」按钮，添加新课程
4. [ ] 填写课程信息（名称、地点、教师、时间等）
5. [ ] 选择星期几
6. [ ] 保存后查看课程是否显示
7. [ ] 点击课程卡片，编辑课程
8. [ ] 测试删除功能
9. [ ] 测试课程按时间排序显示

**预期结果：**
- ✅ 课程表正常显示
- ✅ 添加课程成功，保存到数据库
- ✅ 编辑课程成功，更新数据库
- ✅ 删除功能正常
- ✅ 课程按时间排序显示

**数据库验证：**
- [ ] 在Supabase控制台查看 `courses` 表，确认数据已保存

**问题记录：**
```
[在此记录发现的问题]
```

---

### 模块7：天气功能 ✅

**测试步骤：**
1. [ ] 进入「天气」页面
2. [ ] 查看当前天气（真实数据或模拟数据）
3. [ ] 查看7天天气预报
4. [ ] 查看生活建议
5. [ ] 测试添加城市功能
6. [ ] 测试切换城市功能
7. [ ] 测试设置默认城市

**预期结果：**
- ✅ 天气数据正常显示
- ✅ 天气预报正常显示
- ✅ 添加城市成功
- ✅ 切换城市成功
- ✅ 默认城市设置成功

**API验证：**
- [ ] 检查网络请求是否成功
- [ ] 检查返回数据格式是否正确

**问题记录：**
```
[在此记录发现的问题]
```

---

### 模块8：番茄钟功能 ✅

**测试步骤：**
1. [ ] 进入「番茄钟」页面
2. [ ] 查看默认设置（专注时长、休息时长）
3. [ ] 点击「开始专注」按钮
4. [ ] 测试暂停/继续功能
5. [ ] 测试重置功能
6. [ ] 设置任务名称
7. [ ] 完成一个专注周期
8. [ ] 查看今日统计
9. [ ] 测试自定义设置（时长、音效等）
10. [ ] 查看历史记录

**预期结果：**
- ✅ 计时器正常工作
- ✅ 暂停/继续功能正常
- ✅ 重置功能正常
- ✅ 任务名称保存成功
- ✅ 统计信息正确
- ✅ 历史记录保存成功

**数据库验证：**
- [ ] 在Supabase控制台查看 `pomodoro_sessions` 表，确认数据已保存

**问题记录：**
```
[在此记录发现的问题]
```

---

### 模块9：AI助手功能 ✅

**测试步骤：**
1. [ ] 进入「AI助手」页面
2. [ ] 查看对话历史（如果有）
3. [ ] 发送一条测试消息
4. [ ] 等待AI回复
5. [ ] 查看回复内容是否正确
6. [ ] 继续对话，测试多轮对话
7. [ ] 测试清空对话历史功能

**预期结果：**
- ✅ 对话界面正常显示
- ✅ 发送消息成功
- ✅ AI回复正常（真实API或模拟回复）
- ✅ 多轮对话正常
- ✅ 对话历史保存成功

**API验证：**
- [ ] 检查网络请求是否成功
- [ ] 检查返回数据格式是否正确

**问题记录：**
```
[在此记录发现的问题]
```

---

### 模块10：个人资料功能 ✅

**测试步骤：**
1. [ ] 进入「我的」页面
2. [ ] 查看个人资料是否从数据库加载
3. [ ] 点击头像，更换头像
4. [ ] 点击「编辑资料」，修改用户名
5. [ ] 修改个人简介
6. [ ] 保存后查看是否更新
7. [ ] 返回首页，查看头像是否同步更新
8. [ ] 测试权限设置（通知、位置、相册）
9. [ ] 查看版本信息

**预期结果：**
- ✅ 个人资料正常显示
- ✅ 更换头像成功，保存到数据库
- ✅ 编辑资料成功，更新数据库
- ✅ 首页头像同步更新
- ✅ 权限设置正常

**数据库验证：**
- [ ] 在Supabase控制台查看 `user_profiles` 表，确认数据已保存

**问题记录：**
```
[在此记录发现的问题]
```

---

## 🔍 数据持久化测试

### 测试场景
1. [ ] **关闭小程序后重新打开**
   - 数据是否保存
   - 列表是否正常加载
   - 用户设置是否保留

2. [ ] **刷新页面**
   - 数据是否正常加载
   - 是否有加载状态提示
   - 是否有错误处理

3. [ ] **删除数据后**
   - 是否真正从数据库删除
   - 列表是否立即更新
   - 是否无法恢复

---

## ⚠️ 错误处理测试

### 网络错误测试
1. [ ] **断网情况下**
   - 是否有友好提示
   - 是否显示错误信息
   - 网络恢复后是否能正常使用

2. [ ] **API调用失败**
   - 是否有降级方案
   - 是否显示错误提示
   - 是否记录错误日志

### 数据错误测试
1. [ ] **空数据时**
   - 是否有空状态提示
   - 界面是否正常显示

2. [ ] **数据格式错误**
   - 是否有错误处理
   - 是否不会崩溃

3. [ ] **边界情况**
   - 超长文本输入
   - 特殊字符输入
   - 负数金额（支出）
   - 未来日期（纪念日）

---

## 🚀 性能测试

### 加载速度
- [ ] 首页加载时间：_______ 秒
- [ ] 列表页面加载时间：_______ 秒
- [ ] 图片加载速度：_______ 秒

### 流畅度
- [ ] 页面切换是否流畅
- [ ] 滚动是否流畅
- [ ] 动画是否流畅

### 内存使用
- [ ] 长时间使用后内存是否正常
- [ ] 是否有内存泄漏

---

## 🎨 UI/UX测试

### 界面显示
- [ ] 所有页面布局正常
- [ ] 文字显示完整，无截断
- [ ] 图片显示正常，无变形
- [ ] 颜色搭配合理
- [ ] 图标显示正常

### 交互体验
- [ ] 按钮点击有反馈
- [ ] 表单输入正常
- [ ] 弹窗显示正常
- [ ] 提示信息清晰
- [ ] 加载状态提示明显

---

## 📊 测试结果汇总

### 功能测试结果
- **通过**: _______ 个模块
- **失败**: _______ 个模块
- **部分通过**: _______ 个模块

### 发现的问题

#### 严重问题（阻塞功能）
```
1. [问题描述]
   影响模块：
   复现步骤：
   预期结果：
   实际结果：
```

#### 一般问题（不影响主要功能）
```
1. [问题描述]
   影响模块：
   复现步骤：
   预期结果：
   实际结果：
```

#### 优化建议
```
1. [建议内容]
```

---

## ✅ 测试完成标准

- [ ] 所有功能模块正常工作
- [ ] 数据能正确保存到数据库
- [ ] 数据能正确从数据库加载
- [ ] 错误处理正常，用户提示友好
- [ ] 无控制台错误（或已修复）
- [ ] 无类型错误
- [ ] 网络请求正常
- [ ] 用户体验流畅
- [ ] UI/UX符合设计要求

---

## 📝 测试人员信息

**测试人员**: _______________  
**测试日期**: _______________  
**测试环境**: 微信开发者工具 / 真机调试  
**测试版本**: v1.0.0

---

## 🎯 下一步行动

测试完成后：
1. [ ] 修复所有严重问题
2. [ ] 修复一般问题（根据优先级）
3. [ ] 实施优化建议（可选）
4. [ ] 进行回归测试
5. [ ] 准备发布

---

**测试完成日期**: _______________  
**测试状态**: ⏳ 进行中 / ✅ 已完成 / ❌ 已暂停
